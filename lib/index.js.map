{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";AAAA;;GAEG;;AAEH,gDAAiD;AACjD,+BAA+B;AAE/B,SAAgB,UAAU,CAAC,SAAkB,EAAE,GAAY;IAE1D,IAAI,IAAI,GAAG;QACV,SAAS;KACT,CAAC;IAEF,SAAS,GAAG,SAAS,IAAI,KAAK,CAAC;IAE/B,IAAI,SAAS,KAAK,MAAM,EACxB;QACC,IAAI,GAAG;YACN,UAAU;SACV,CAAA;KACD;IAED,IAAI,EAAE,GAAG,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,EAAE;QACzC,GAAG;QACH,SAAS,EAAE,IAAI;KACf,CAAC,CAAC;IAEH,IAAI,EAAE,CAAC,KAAK,EACZ;QACC,MAAM,EAAE,CAAC,KAAK,CAAA;KACd;IAED,IAAI,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE;SAC/B,OAAO,CAAC,0BAA0B,EAAE,EAAE,CAAC;SACvC,OAAO,CAAC,oBAAoB,EAAE,EAAE,CAAC;SACjC,OAAO,CAAC,YAAY,EAAE,EAAE,CAAC,CAC1B;IAED,IAAI,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IAE/B,OAAO,IAAI,CAAA;AACZ,CAAC;AAlCD,gCAkCC","sourcesContent":["/**\n * Created by user on 2018/11/28/028.\n */\n\nimport crossSpawn = require('cross-spawn-extra');\nimport JSON5 = require('json5')\n\nexport function npmVersion(npmClient?: string, cwd?: string)\n{\n\tlet args = [\n\t\t'version'\n\t];\n\n\tnpmClient = npmClient || 'npm';\n\n\tif (npmClient === 'yarn')\n\t{\n\t\targs = [\n\t\t\t'versions',\n\t\t]\n\t}\n\n\tlet cp = crossSpawn.sync(npmClient, args, {\n\t\tcwd,\n\t\tstripAnsi: true,\n\t});\n\n\tif (cp.error)\n\t{\n\t\tthrow cp.error\n\t}\n\n\tlet output = cp.stdout.toString()\n\t\t.replace(/^yarn versions [^\\n]+$/gm, '')\n\t\t.replace(/^Done in [^\\n]+$/gm, '')\n\t\t.replace(/^\\s+|\\s+$/g, '')\n\t;\n\n\tlet json = JSON5.parse(output);\n\n\treturn json\n}\n\n\n"]}